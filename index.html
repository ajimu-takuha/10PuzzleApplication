<!DOCTYPE html>
<html>

<head>
    <title>10PUZZLE</title>
    <meta charset="utf-8">
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="js/make10.js"></script>
    <link rel="stylesheet" href="css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>

<body>
    <div id="area" class="area">
        <ul id="circles" class="circles">
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <div id="wave" class="wave">
                <canvas id="waveCanvas" class="waveCanvas"></canvas>
            </div>
        </ul>
        <div id="all" v-bind:class="{allOverDrive:mode == 'overDrive', all:mode != 'overDrive'}">
            <div class="contentWrapper">
                <div id="correctCube"></div>
                <div id="result" class="result">
                    <br>
                    <div id="scoreWrap">
                        <span id="modeText">　Mode : {{mode}}　</span>
                        <div><br>　Time : {{erapsedTime}}　</div>
                        <div><br>　Reload : {{reloadCount}}　</div>
                        <div><br>　Score : {{score}}　</div>
                    </div>
                    <br><span id="evaluation">{{evaluation}}</span>
                    <span id="evalComment">
                        <br>{{evalComment}}</span>
                    <br><button id="tryButton" class="tryButton" v-on:click="tryAgain()">Try Again</button>
                    </p>
                </div>
                <div id="answerFormula" class="answerFormula">
                    {{answerFormula}}={{target}}<br>
                    <button id="tryButton" class="tryButton" v-on:click="tryAgain()">Try Again</button>
                </div>
                <div id="answerNoChange" class="answerNoChange">
                </div>
                <div id="header">
                    <div id="title" v-bind:class="{'overDriveTitle':mode == 'overDrive', 'title':mode != 'overDrive'}">
                        {{ title }}
                    </div>
                </div>
                <div id="clearCount"
                    v-bind:class="{'overDriveCount':mode == 'overDrive', 'clearCount':mode != 'overDrive'}">
                    Clear:{{ clearCount }}/10　Reload:{{ reloadCount }}
                    <p id="targetNum"
                        v-bind:class="{'overDriveCount':mode == 'overDrive', 'targetNum':mode != 'overDrive'}">
                        　Target:{{target}}</p>
                </div>
                <div id="formulaBody">

                    <div id="firstBra" v-on:click="braChange('firstBra')"
                        v-bind:class="{'overDriveCAct':overDriveCAct[0], 'clickAct':clickAct[0], 'overDriveBra':mode == 'overDrive', 'brackets formula':mode != 'overDrive'}">
                        {{ brackets[0] }}
                    </div>

                    <div v-bind:class="{'overDriveSym':mode == 'overDrive', 'symbol formula':mode != 'overDrive'}"
                        id="addSym" v-on:click="addSymChange">
                        {{ addSym[0] }}
                    </div>

                    <div type="text"
                        v-bind:class="{'overDriveCAct':overDriveNBChange[0], 'clickAct':numBackChange[0], 'overDriveNum':mode == 'overDrive', 'numbers formula':mode != 'overDrive'}"
                        id="firstN" v-on:click="numReplace('first')">
                        {{ numbers[0]}}
                    </div>

                    <div v-bind:class="{'overDriveSym':mode == 'overDrive', 'symbol formula':mode != 'overDrive'}"
                        id="firstSymbol" v-on:click="firstSymChange">
                        {{ firstSym[0] }}
                    </div>

                    <div v-bind:class="{'overDriveCAct':overDriveCAct[1], 'clickAct':clickAct[1], 'overDriveBra':mode == 'overDrive', 'brackets formula':mode != 'overDrive'}"
                        id="secondBra" v-on:click="braChange('secondBra')">
                        {{ brackets[1] }}
                    </div>

                    <div type="math"
                        v-bind:class="{'overDriveCAct':overDriveNBChange[1], 'clickAct':numBackChange[1], 'overDriveNum':mode == 'overDrive', 'numbers formula':mode != 'overDrive'}"
                        id="secondN" v-on:click="numReplace('second')">
                        {{ numbers[1] }}
                    </div>

                    <div v-bind:class="{'overDriveCAct':overDriveCAct[2], 'clickAct':clickAct[2], 'overDriveBra':mode == 'overDrive', 'brackets formula':mode != 'overDrive'}"
                        id="thirdBra" v-on:click="braChange('thirdBra')">
                        {{ brackets[2] }}
                    </div>

                    <div v-bind:class="{'overDriveSym':mode == 'overDrive', 'symbol formula':mode != 'overDrive'}"
                        id="secondSymbol" v-on:click="secondSymChange">
                        {{ secondSym[0] }}
                    </div>

                    <div v-bind:class="{'overDriveCAct':overDriveCAct[3], 'clickAct':clickAct[3], 'overDriveBra':mode == 'overDrive', 'brackets formula':mode != 'overDrive'}"
                        id="forthBra" v-on:click="braChange('fourthBra')">
                        {{ brackets[3] }}
                    </div>

                    <div type="math"
                        v-bind:class="{'overDriveCAct':overDriveNBChange[2], 'clickAct':numBackChange[2], 'overDriveNum':mode == 'overDrive', 'numbers formula':mode != 'overDrive'}"
                        id="thirdN" v-on:click="numReplace('third')">
                        {{ numbers[2] }}
                    </div>

                    <div v-bind:class="{'overDriveCAct':overDriveCAct[4], 'clickAct':clickAct[4], 'overDriveBra':mode == 'overDrive', 'brackets formula':mode != 'overDrive'}"
                        id="fifthBra" v-on:click="braChange('fifthBra')">
                        {{ brackets[4] }}
                    </div>

                    <div v-bind:class="{'overDriveSym':mode == 'overDrive', 'symbol formula':mode != 'overDrive'}"
                        id="thirdSymbol" v-on:click="thirdSymChange">
                        {{ thirdSym[0] }}
                    </div>

                    <div type="math"
                        v-bind:class="{'overDriveCAct':overDriveNBChange[3], 'clickAct':numBackChange[3], 'overDriveNum':mode == 'overDrive', 'numbers formula':mode != 'overDrive'}"
                        id="fourthN" v-on:click="numReplace('fourth')">
                        {{ numbers[3]}}
                    </div>

                    <div v-bind:class="{'overDriveCAct':overDriveCAct[5], 'clickAct':clickAct[5], 'overDriveBra':mode == 'overDrive', 'brackets formula':mode != 'overDrive'}"
                        id="sixthBra" v-on:click="braChange('sixthBra')">
                        {{ brackets[5] }}
                    </div>
                    <div v-bind:class="{'overDriveSym':mode == 'overDrive', 'ecole':mode != 'overDrive'}" id="ecole">=
                    </div>
                    <div id="answerWrap">
                        <div class="formula" id="answer"
                            v-bind:class="{'answer': mode != 'overDrive', 'overDriveAnswer': mode == 'overDrive'}">
                            {{answer}}
                        </div>
                        <!-- v-bind:class="{'answer':typeof(answer) != 'string' && mode != 'overDrive', 'incorrectFormula':typeof(answer) == 'string' && mode != 'overDrive', 'overDriveAnswer':typeof(answer) != 'string' && mode == 'overDrive', 'overDriveIncorrectF':typeof(answer) == 'string' && mode == 'overDrive'}" -->
                    </div>
                </div>
                <div id="buttonWrapper">
                    <button type="button" id="showAnsButton" v-on:click="showAns()"
                        v-bind:class="{'inactive': isStart, 'overDriveButtons overDriveStartButton':mode == 'overDrive', 'buttons startButton':mode != 'overDrive'}">Show
                        Answer</button>
                    <button type="button" id="startButton" v-on:click="createNum(); start(); startClick()"
                        v-bind:class="{'inactive': isStart, 'btnNoSelect': btnIsSelect[0], 'overDriveButtons overDriveStartButton':mode == 'overDrive', 'buttons startButton':mode != 'overDrive'}">start</button>
                    <button type="button"
                        v-bind:class="{'overDriveButtons overDriveReloadButton':mode == 'overDrive', 'buttons reloadButton':mode != 'overDrive'}"
                        id="reloadButton" v-on:click="createNum(); reloadClick()">reload (+10sec)</button>
                    <button type="button"
                        v-bind:class="{'overDriveButtons overDriveResetSymButton':mode == 'overDrive', 'buttons':mode != 'overDrive'}"
                        id="resetButton" v-on:click="resetSym">reset
                        symbols</button>
                </div>
                <div id="modeWrapper">
                    <button v-bind:class="{modeButtons: true, digitButton: true, btnIsSelect: btnIsSelect[3]}"
                        v-on:click="modeChangeDigit">Use one digit</button>
                    <button v-bind:class="{modeButtons :true, teensButton: true, btnIsSelect: btnIsSelect[4]}"
                        v-on:click="modeChangeTeens">Use under 20</button>
                    <button id="overDriveButton" v-bind:class="{modeButtons: true, btnIsSelect: btnIsSelect[5]}"
                        v-on:click="modeChangeOverDrive">OverDrive</button>
                </div>
                <div class="controls">
                    <div v-bind:class="{'overDriveTimer':mode == 'overDrive', 'timer':mode != 'overDrive'}">{{ time }}
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="js/backgroundCSS.js"></script>
</body>
<script>
    "use strict"

    var all = new Vue({
        el: "#all",
        data: {
            title: "Ten Puzzle",
            numbers: ["", "", "", ""],
            passNum: ["first", "second", "third", "fourth", "fifth", "sixth"],
            selectedNum: ["", "", "", "", "", ""],
            numBackChange: [false, false, false, false, false, false],
            overDriveNBChange: [false, false, false, false, false, false],
            selectedNumIndexF: -1,
            selectedNumTF: false,
            bracketNames: ["firstBra", "secondBra", "thirdBra", "fourthBra", "fifthBra", "sixthBra"],
            brackets: ["", "", "", "", "", ""],
            selectedBra: ["", "", "", "", "", ""],
            firstSym: ["+"],
            secondSym: ["+"],
            thirdSym: ["+"],
            addSym: ["+"],
            symValue: ["+", "+", "+", "+"],
            clearCount: 0,
            // createCount: 0,
            reloadCount: 0,
            answerFormula: "",
            selectFlag: false,
            startFlag: false,
            ansFlag: false,
            cheatFlag: false,
            clickAct: [false, false, false, false, false, false],
            overDriveCAct: [false, false, false, false, false, false],
            btnIsSelect: [false, false, false, true, false, false],
            mode: "digit",
            target: 10,
            score: 0,
            evaluation: "",
            evalComment: "",
            // ネットから
            time: "00:00:000",
            startTime: 0,
            erapsedTime: 0,
            isStart: false,
            isStop: true,
            isReset: true,
            timeoutId: 0,
        },
        watch: {
            answer: function (ansVal) {

                if (ansVal == this.target && this.startFlag == true) {
                    this.clearCount++;
                    if (this.ansFlag == true && ansVal == 10) {
                        this.cheatFlag = true;
                    }
                    this.ansFlag = true;
                    this.selectedNumIndexF = -1;
                    this.selectedNumTF = false;

                    if (this.clearCount == 10) {
                        this.stop();
                        this.startFlag = false;
                        this.resetNumBraSym();
                        if (this.cheatFlag == true) {
                            this.evaluation = "Cheetah";
                            this.evalComment = "You solved this like a cheetah speed, but don't be a cheater.";
                        } else if (this.score < 700) {
                            this.evaluation = "Slug";
                            this.evalComment = "Try More...";
                        } else if (700 < this.score && this.score < 820) {
                            this.evaluation = "Hermit Crab";
                            this.evalComment = "Keep it Up";
                        } else if (820 < this.score && this.score < 850) {
                            this.evaluation = "Gentoo Penguin";
                            this.evalComment = "Almost!";
                        } else if (850 < this.score && this.score < 910) {
                            document.getElementById("overDriveButton").style.pointerEvents = "auto";
                            this.evaluation = "Black Mamba";
                            this.evalComment = "Congratu! You are now ready to take on new levels!";
                        } else if (910 < this.score && this.score < 940) {
                            document.getElementById("overDriveButton").style.pointerEvents = "auto";
                            this.evaluation = "Springbok";
                            this.evalComment = "Are you Human? You have to play OverDrive mode.";
                        } else if (940 < this.score) {
                            document.getElementById("overDriveButton").style.pointerEvents = "auto";
                            this.evaluation = "Alian";
                            this.evalComment = "You are Not Human... Welcome OverDrive.";
                        }
                        const result = document.getElementById("result");
                        result.style.display = "block";
                    } else {
                        const correctCube = document.getElementById("correctCube");
                        correctCube.style.display = "block";
                        setTimeout(() => {
                            this.ansFlag = false;
                        }, 1000);
                        setTimeout(() => {
                            correctCube.style.display = "";
                        }, 1000);
                        setTimeout(this.createNum, 1000);
                        return;
                    }
                } else if (ansVal == this.target) {
                    const correctCube = document.getElementById("correctCube");
                    correctCube.style.display = "block";
                    setTimeout(() => {
                        correctCube.style.display = "";
                    }, 1000);
                    setTimeout(this.createNum, 1000);
                    return;
                }
            }
        },
        computed: {

            answer() {
                let text = "return (" + this.brackets[0] + this.addSym[0] + this.numbers[0] + this.symValue[0] + this.brackets[1] + this.numbers[1] + this.brackets[2] + this.symValue[1] + this.brackets[3] + this.numbers[2] + this.brackets[4] + this.symValue[2] + this.numbers[3] + this.brackets[5] + ")";
                try {
                    if (text.length >= 16) {
                        return Math.floor((Function(text)()) * 10) / 10;
                    }
                } catch (e) {
                    this.resetBra();
                    text = "return (" + this.brackets[0] + this.addSym[0] + this.numbers[0] + this.symValue[0] + this.brackets[1] + this.numbers[1] + this.brackets[2] + this.symValue[1] + this.brackets[3] + this.numbers[2] + this.brackets[4] + this.symValue[2] + this.numbers[3] + this.brackets[5] + ")";

                    return Math.floor((Function(text)()) * 10) / 10;
                }
            }
        },
        methods: {
            modeChangeDigit() {
                this.mode = "digit";
                this.title = "Ten Puzzle";
                this.btnIsSelect.splice(3, 1, true);
                this.btnIsSelect.splice(4, 1, false);
                this.btnIsSelect.splice(5, 1, false);
                this.tryAgain();
                this.target = 10;

                const area = document.getElementById("area");
                area.classList.remove("overDriveArea");
                area.classList.add("area");
                const circles = document.getElementById("circles");
                circles.classList.remove("overDriveCircles");
                circles.classList.add("circles");

                var wave = document.getElementById('wave');
                wave.style.display = "none";
                var waveCanvas = document.getElementById('waveCanvas');
                waveCanvas.style.display = "none";
            },
            modeChangeTeens() {
                this.mode = "teens";
                this.title = "Ten Puzzle";
                this.btnIsSelect.splice(3, 1, false);
                this.btnIsSelect.splice(4, 1, true);
                this.btnIsSelect.splice(5, 1, false);
                this.tryAgain();
                this.target = 10;

                const area = document.getElementById("area");
                area.classList.remove("overDriveArea");
                area.classList.add("area");
                const circles = document.getElementById("circles");
                circles.classList.remove("overDriveCircles");
                circles.classList.add("circles");

                var wave = document.getElementById('wave');
                wave.style.display = "none";
                var waveCanvas = document.getElementById('waveCanvas');
                waveCanvas.style.display = "none";

            },
            modeChangeOverDrive() {
                this.mode = "overDrive";
                this.title = "Number Puzzle";
                this.btnIsSelect.splice(3, 1, false);
                this.btnIsSelect.splice(4, 1, false);
                this.btnIsSelect.splice(5, 1, true);
                this.tryAgain();

                const area = document.getElementById("area");
                area.classList.remove("area");
                area.classList.add("overDriveArea");
                const circles = document.getElementById("circles");
                circles.classList.remove("circles");
                circles.classList.add("overDriveCircles");

                var wave = document.getElementById('wave');
                wave.style.display = "inline";
                var waveCanvas = document.getElementById('waveCanvas');
                waveCanvas.style.display = "inline";
            },
            //startボタン押下時、もしくはanswer==10の時に数値をランダムに変更
            createNum() {

                this.selectFlag = false;
                this.selectedNumTF = false;
                for (let i = 0; i < this.numBackChange.length; i++) {
                    this.numBackChange.splice(i, 1, false);
                    this.overDriveNBChange.splice(i, 1, false);
                }
                for (let i = 0; i < this.selectedNum.length; i++) {
                    this.selectedNum.splice(i, 1, "");
                }
                if (this.mode == "digit") {
                    let nums = [];
                    for (let i = 0; i < this.numbers.length; i++) {
                        nums[i] = Math.floor(Math.random() * 9) + 1;
                    }
                    if (nums[0] + nums[1] + nums[2] + nums[3] == this.target) {
                        console.log("足し算で終わったのでもう一度算出");
                        this.createNum();
                    }
                    let [TrueOrFalse, make10Ans] = make10(nums, 10);
                    if (TrueOrFalse) {
                        for (let i = 0; i < this.numbers.length; i++) {
                            this.numbers.splice(i, 1, nums[i]);
                        }
                        this.answerFormula = make10Ans;
                        console.log(this.answerFormula);
                        // this.createCount++;
                    } else {
                        this.createNum();
                    }
                } else if (this.mode == "teens") {
                    let nums = [];
                    for (let i = 0; i < this.numbers.length; i++) {
                        nums[i] = Math.floor(Math.random() * 19) + 1;
                    }
                    if (nums[0] + nums[1] + nums[2] + nums[3] == this.target) {
                        this.createNum();
                    }
                    let [TrueOrFalse, make10Ans] = make10(nums, 10);
                    if (TrueOrFalse) {
                        for (let i = 0; i < this.numbers.length; i++) {
                            this.numbers.splice(i, 1, nums[i]);
                        }
                        this.answerFormula = make10Ans;
                        // this.createCount++;
                    } else {
                        this.createNum();
                    }
                } else if (this.mode == "overDrive") {
                    let nums = [];
                    for (let i = 0; i < this.numbers.length; i++) {
                        // nums[i] = Math.floor((Math.random() * 19) + 1);
                        nums[i] = (Math.floor((Math.random() * 40) + 1)) / 2;
                    }
                    this.target = Math.floor((Math.random() * 60 + 1) / 2);
                    if (nums[0] + nums[1] + nums[2] + nums[3] == this.target) {
                        this.createNum();
                    }
                    let [TrueOrFalse, make10Ans] = make10(nums, this.target);
                    if (TrueOrFalse) {
                        for (let i = 0; i < this.numbers.length; i++) {
                            this.numbers.splice(i, 1, nums[i]);
                        }
                        this.answerFormula = make10Ans;
                        // this.createCount++;
                    } else {
                        this.createNum();
                    }
                }
                this.firstSym.splice(0, 1, "+");
                this.secondSym.splice(0, 1, "+");
                this.thirdSym.splice(0, 1, "+");
                this.addSym.splice(0, 1, "+");
                for (let i = 0; i < this.symValue.length; i++) {
                    this.symValue.splice(i, 1, "+");
                }
                this.resetBra();
            },
            braChange(braNumber) {
                //始めに選択した括弧を配列selectedBraに反映
                if (this.selectFlag == false) {
                    for (let i = 0; i < this.bracketNames.length; i++) {
                        if (this.bracketNames[i] == braNumber) {
                            if (this.brackets[i] == "(" || this.brackets[i] == ")") {
                                this.resetBra();
                                return;
                            }
                            if (this.mode != "overDrive") {
                                this.clickAct.splice(i, 1, true);
                            } else {
                                this.overDriveCAct.splice(i, 1, true);
                            }
                            this.selectedBra.splice(i, 1, "replace");
                        }
                    }
                    this.selectFlag = true;
                }
                //二番目に選択した括弧も配列selectedBraに反映し、Bracktsと差し替えて画面に反映
                else if (this.selectFlag == true) {
                    for (let i = 0; i < this.bracketNames.length; i++) {
                        if (this.bracketNames[i] == braNumber) {
                            this.selectedBra.splice(i, 1, "replace");
                        }
                        this.clickAct.splice(i, 1, false);
                        this.overDriveCAct.splice(i, 1, false);
                    }
                    if (this.selectedBra.indexOf("replace") == this.selectedBra.lastIndexOf("replace")) {
                        this.resetBra();
                        this.selectFlag = false;
                    } else {
                        this.selectedBra.splice(this.selectedBra.indexOf("replace"), 1, "(");
                        this.selectedBra.splice(this.selectedBra.lastIndexOf("replace"), 1, ")");
                        this.brackets.splice(0, this.brackets.length);
                        this.brackets.push(...this.selectedBra);
                        this.selectFlag = false;
                    }
                }
            },
            // 全ての括弧を削除し、clickActクラスを全てfalseに
            resetBra() {
                for (let i = 0; i < this.brackets.length; i++) {
                    this.selectedBra.splice(i, 1, "");
                    this.brackets.splice(i, 1, "");
                    this.clickAct.splice(i, 1, false);
                    this.overDriveCAct.splice(i, 1, false);
                }
            },
            resetSym() {
                this.firstSym.splice(0, 1, "+");
                this.secondSym.splice(0, 1, "+");
                this.thirdSym.splice(0, 1, "+");
                this.addSym.splice(0, 1, "+");
                for (let i = 0; i < this.symValue.length; i++) {
                    this.symValue.splice(i, 1, "+");
                }
            },
            //選択した数字同士の場所を置換する
            numReplace(received) {
                if (this.selectedNumTF == false) {
                    for (let i = 0; i < this.numbers.length; i++) {
                        if (this.passNum[i] == received) {
                            this.selectedNum[i] = this.numbers[i];
                            if (this.mode != "overDrive") {
                                this.numBackChange.splice(i, 1, true);
                            } else {
                                this.overDriveNBChange.splice(i, 1, true);
                            }
                            // 始めに選択した数値の番号をselectedNumIndexFに代入
                            this.selectedNumIndexF = i;
                        }
                    }
                    this.selectedNumTF = true;
                    // 選択された数値と位置はselectedNumに格納される
                } else if (this.selectedNumTF == true) {
                    for (let i = 0; i < this.numbers.length; i++) {
                        if (this.passNum[i] == received) {
                            this.selectedNum[i] = this.numbers[i];
                            // 始めに選択した数値をfirstValueに格納
                            let firstValue = this.selectedNum[this.selectedNumIndexF];
                            // 始めに選択した数値を後に選択した数値に置き換え
                            this.numbers.splice(this.selectedNumIndexF, 1, this.selectedNum[i]);
                            // 後に選択した数値(番号 = i)を始めに選択した数値に置き換え
                            this.numbers.splice(i, 1, firstValue);
                        }
                    }
                    for (let i = 0; i < this.selectedNum.length; i++) {
                        this.selectedNum.splice(i, 1, "");
                    }
                    for (let i = 0; i < this.numBackChange.length; i++) {
                        this.numBackChange.splice(i, 1, false);
                        this.overDriveNBChange.splice(i, 1, false);
                    }
                    this.selectedNumIndexF = -1;
                    this.selectedNumTF = false;
                }
            },
            firstSymChange: function () {
                if (all.firstSym[0] == "+") {
                    Vue.set(all.firstSym, 0, "-");
                    this.symValue.splice(0, 1, "-");
                } else if (all.firstSym[0] == "-") {
                    Vue.set(all.firstSym, 0, "×");
                    this.symValue.splice(0, 1, "*");
                } else if (all.firstSym[0] == "×") {
                    Vue.set(all.firstSym, 0, "÷");
                    this.symValue.splice(0, 1, "/");
                } else {
                    Vue.set(all.firstSym, 0, "+");
                    this.symValue.splice(0, 1, "+");
                }
            },
            secondSymChange: function () {
                if (all.secondSym[0] == "+") {
                    Vue.set(all.secondSym, 0, "-");
                    this.symValue.splice(1, 1, "-");
                } else if (all.secondSym[0] == "-") {
                    Vue.set(all.secondSym, 0, "×");
                    this.symValue.splice(1, 1, "*");
                } else if (all.secondSym[0] == "×") {
                    Vue.set(all.secondSym, 0, "÷");
                    this.symValue.splice(1, 1, "/");
                } else {
                    Vue.set(all.secondSym, 0, "+");
                    this.symValue.splice(1, 1, "+");
                }
            },
            thirdSymChange: function () {
                if (all.thirdSym[0] == "+") {
                    Vue.set(all.thirdSym, 0, "-");
                    this.symValue.splice(2, 1, "-");
                } else if (all.thirdSym[0] == "-") {
                    Vue.set(all.thirdSym, 0, "×");
                    this.symValue.splice(2, 1, "*");
                } else if (all.thirdSym[0] == "×") {
                    Vue.set(all.thirdSym, 0, "÷");
                    this.symValue.splice(2, 1, "/");
                } else {
                    Vue.set(all.thirdSym, 0, "+");
                    this.symValue.splice(2, 1, "+");
                }
            },
            addSymChange() {
                if (all.addSym[0] == "+") {
                    Vue.set(all.addSym, 0, "-");
                    this.symValue.splice(3, 1, "-");
                } else if (all.addSym[0] == "-") {
                    Vue.set(all.addSym, 0, "+");
                    this.symValue.splice(3, 1, "+");
                }
            },
            reloadClick() {
                if (this.startFlag == true) {
                    this.reloadCount++;
                }
            },
            startClick() {
                this.clearCount = 0;
                // this.createCount = 0;
                this.btnIsSelect.splice(0, 1, true);
                this.reloadCount = 0;
                this.startFlag = true;
                this.ansFlag = false;
                this.cheatFlag = false;
            },
            tryAgain() {
                this.btnIsSelect.splice(0, 1, false);
                result.style.display = "";
                answerFormula.style.display = "";
                answerNoChange.style.display = "";
                this.clearCount = 0;
                // this.createCount = 0;
                this.reloadCount = 0;
                this.startFlag = false;
                this.ansFlag = false;
                this.cheatFlag = false;
                this.stop();
                this.reset();
                this.resetBra();
                this.resetNumBraSym();
            },
            showAns() {
                this.answerFormula = this.answerFormula.substr(6);
                const answerFormula = document.getElementById("answerFormula");
                answerFormula.style.display = "block";
                const answerNoChange = document.getElementById("answerNoChange");
                answerNoChange.style.display = "block";
                this.stop();
                this.startFlag = false;
            },
            resetNumBraSym() {
                this.firstSym.splice(0, 1, "+");
                this.secondSym.splice(0, 1, "+");
                this.thirdSym.splice(0, 1, "+");
                this.addSym.splice(0, 1, "+");
                for (let i = 0; i < this.symValue.length; i++) {
                    this.symValue.splice(i, 1, "+");
                }
                for (let i = 0; i < this.numbers.length; i++) {
                    this.numbers.splice(i, 1, "");
                }
                for (let i = 0; i < 3; i++) {
                    this.btnIsSelect[i] = false;
                }
                this.selectedNumIndexF = -1;
                this.selectedNumTF = false;
            },
            // ネットから








            countUp() {
                const d = new Date(Date.now() - this.startTime + this.erapsedTime);
                const m = String(d.getMinutes()).padStart(2, '0');
                const s = String(d.getSeconds()).padStart(2, '0');
                const ms = String(d.getMilliseconds()).padStart(3, '0');

                this.time = `${m}:${s}:${ms}`;
                this.timeoutId = setTimeout(() => {
                    this.countUp();
                }, 10);
            },
            setButtonStateInitial() {
                this.isStart = false;
                this.isStop = true;
                this.isReset = true;
            },
            setButtonStateRunning() {
                this.isStart = true;
                this.isStop = false;
                this.isReset = true;
            },
            setButtonStateStopped() {
                this.isStart = false;
                this.isStop = true;
                this.isReset = false;
            },

            start() {
                if (this.isStart) {
                    return;
                }
                this.setButtonStateRunning();
                this.startTime = Date.now();
                this.countUp();
            },
            stop() {
                if (this.isStop) {
                    return;
                }
                this.setButtonStateStopped();
                clearTimeout(this.timeoutId);
                this.erapsedTime += Date.now() - this.startTime;
                this.erapsedTime = (Math.round((this.erapsedTime) / 100) / 10) - 9;
                this.score = 1000 - (this.erapsedTime + 10 * this.reloadCount);
            },
            reset() {
                if (this.isReset) {
                    return;
                }
                this.time = '00:00:000';
                this.setButtonStateInitial();
                this.erapsedTime = 0;
            }
        }
    });
</script>



</html>